# AI_FREELANCE_AUTOMATION/pytest.ini
[tool:pytest]
# Test discovery
testpaths = tests
python_files = test_*.py
python_classes = Test*
python_functions = test_*

# Output and reporting
addopts =
    --strict-markers
    --strict-config
    --tb=short
    --showlocals
    --durations=10
    --color=yes
    --junitxml=reports/test-results.xml
    --cov=.
    --cov-report=html:reports/coverage/html
    --cov-report=xml:reports/coverage/coverage.xml
    --cov-report=term-missing
    --cov-fail-under=85

# Ignore non-test directories
norecursedirs = .git .venv venv node_modules __pycache__ dist build logs data backups

# Custom markers for test categorization
markers =
    unit: Unit tests (fast, isolated)
    integration: Integration tests (multiple components)
    e2e: End-to-end system tests
    security: Security-focused tests
    ai: AI model and inference tests
    platform: Freelance platform integration tests
    payment: Payment processing tests
    performance: Performance and load tests
    recovery: Self-healing and recovery tests
    slow: Tests that take >5s (skipped by default in CI fast runs)

# Environment-specific settings
filterwarnings =
    error
    ignore::DeprecationWarning
    ignore::PendingDeprecationWarning

# Plugins
required_plugins =
    pytest-cov
    pytest-asyncio
    pytest-mock
    pytest-xdist