"""
–°–∏—Å—Ç–µ–º–∞ –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç–∏ –¥–ª—è –∫–ª–∏–µ–Ω—Ç–æ–≤ ‚Äî –ø–æ–≤—ã—à–µ–Ω–∏–µ –¥–æ–≤–µ—Ä–∏—è —á–µ—Ä–µ–∑ –æ—Ç–∫—Ä—ã—Ç–æ—Å—Ç—å
–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ –ò–ò-–ø–æ–º–æ—â–Ω–∏–∫–æ–≤.
"""

import json
from pathlib import Path
from typing import Dict, Any, List
from datetime import datetime

from core.security.audit_logger import AuditLogger


class ClientTransparencySystem:
    """
    –°–∏—Å—Ç–µ–º–∞ –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç–∏ –¥–ª—è –∫–ª–∏–µ–Ω—Ç–æ–≤ —Å:
    - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–µ–π –æ—Ç—á—ë—Ç–æ–≤ –æ –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç–∏
    - –í–∫–ª—é—á–µ–Ω–∏–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ–± –ò–ò –≤ –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã
    - –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤ –∫–∞—á–µ—Å—Ç–≤–∞
    - –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–µ–π –ø—Ä–æ—Ü–µ—Å—Å–∞ —Ä–∞–±–æ—Ç—ã
    """

    def __init__(self, data_dir: str = "data/transparency"):
        self.data_dir = Path(data_dir)
        self.data_dir.mkdir(parents=True, exist_ok=True)
        self.audit_logger = AuditLogger()

        self.transparency_badge = self._generate_transparency_badge()
        self.quality_certificate = self._generate_quality_certificate()

    def generate_transparency_disclosure(self, job_id: str) -> Dict[str, Any]:
        """
        –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ä–∞—Å–∫—Ä—ã—Ç–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ–± –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ –ò–ò –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –∑–∞–∫–∞–∑–∞.
        –í–∫–ª—é—á–∞–µ—Ç—Å—è –≤ –∫–æ–Ω—Ç—Ä–∞–∫—Ç –∏–ª–∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –∫–ª–∏–µ–Ω—Ç—É –æ—Ç–¥–µ–ª—å–Ω–æ.
        """

        disclosure = {
            'job_id': job_id,
            'generated_at': datetime.now().isoformat(),
            'ai_usage_disclosure': {
                'title': '–†–∞—Å–∫—Ä—ã—Ç–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ–± –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ –ò–ò',
                'content': """–£–≤–∞–∂–∞–µ–º—ã–π –∫–ª–∏–µ–Ω—Ç!

–Ø –∏—Å–ø–æ–ª—å–∑—É—é —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –ò–ò-–∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è –ø–æ–≤—ã—à–µ–Ω–∏—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –∏ –∫–∞—á–µ—Å—Ç–≤–∞ —Ä–∞–±–æ—Ç—ã. 
–í–æ—Ç –∫–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:

1. –ò–ò –ø–æ–º–æ–≥–∞–µ—Ç –º–Ω–µ –∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –≤–∞—à–∏ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –∏ –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —á–µ—Ä–Ω–æ–≤–∏–∫–∏ —Ä–∞–±–æ—Ç
2. –Ø –ª–∏—á–Ω–æ –ø—Ä–æ–≤–µ—Ä—è—é, —Ä–µ–¥–∞–∫—Ç–∏—Ä—É—é –∏ –¥–æ–ø–æ–ª–Ω—è—é –∫–∞–∂–¥—ã–π —á–µ—Ä–Ω–æ–≤–∏–∫
3. –§–∏–Ω–∞–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞ –ø—Ä–æ—Ö–æ–¥–∏—Ç –º–Ω–æ–≥–æ—Å—Ç—É–ø–µ–Ω—á–∞—Ç—É—é –ø—Ä–æ–≤–µ—Ä–∫—É –∫–∞—á–µ—Å—Ç–≤–∞
4. –Ø –Ω–µ—Å—É –ø–æ–ª–Ω—É—é –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å –∑–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç

–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –¥–ª—è –≤–∞—Å:
‚úì –ë—ã—Å—Ç—Ä–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞–∫–∞–∑–æ–≤
‚úì –í—ã—Å–æ–∫–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ –±–ª–∞–≥–æ–¥–∞—Ä—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –ø—Ä–æ–≤–µ—Ä–∫–µ
‚úì –†–∞–∑—É–º–Ω—ã–µ —Ü–µ–Ω—ã –±–ª–∞–≥–æ–¥–∞—Ä—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
‚úì –ì–∞—Ä–∞–Ω—Ç–∏—è –≤–æ–∑–≤—Ä–∞—Ç–∞ —Å—Ä–µ–¥—Å—Ç–≤ –ø—Ä–∏ –Ω–µ—É–¥–æ–≤–ª–µ—Ç–≤–æ—Ä–∏—Ç–µ–ª—å–Ω–æ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ

–ï—Å–ª–∏ —É –≤–∞—Å –µ—Å—Ç—å –≤–æ–ø—Ä–æ—Å—ã –æ –ø—Ä–æ—Ü–µ—Å—Å–µ —Ä–∞–±–æ—Ç—ã ‚Äî —è –≤—Å–µ–≥–¥–∞ –≥–æ—Ç–æ–≤ –æ—Ç–≤–µ—Ç–∏—Ç—å!""",
                'tools_used': [
                    '–ì–µ–Ω–µ—Ä–∞—Ü–∏—è —á–µ—Ä–Ω–æ–≤–∏–∫–æ–≤ —Ç–µ–∫—Å—Ç–æ–≤',
                    '–ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –ø–ª–∞–≥–∏–∞—Ç',
                    '–ê–Ω–∞–ª–∏–∑ –∫–∞—á–µ—Å—Ç–≤–∞',
                    '–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –æ—Ç–≤–µ—Ç—ã –Ω–∞ –ø—Ä–æ—Å—Ç—ã–µ –≤–æ–ø—Ä–æ—Å—ã'
                ],
                'human_oversight': '100% —Ä–∞–±–æ—Ç –ø—Ä–æ—Ö–æ–¥—è—Ç —Ñ–∏–Ω–∞–ª—å–Ω—É—é –ø—Ä–æ–≤–µ—Ä–∫—É –∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –º–Ω–æ–π –ª–∏—á–Ω–æ',
                'quality_guarantee': '–ì–∞—Ä–∞–Ω—Ç–∏—è –∫–∞—á–µ—Å—Ç–≤–∞: –±–µ—Å–ø–ª–∞—Ç–Ω—ã–µ –ø—Ä–∞–≤–∫–∏ –¥–æ –ø–æ–ª–Ω–æ–≥–æ —É–¥–æ–≤–ª–µ—Ç–≤–æ—Ä–µ–Ω–∏—è –∏–ª–∏ –≤–æ–∑–≤—Ä–∞—Ç —Å—Ä–µ–¥—Å—Ç–≤'
            },
            'quality_assurance': {
                'quality_checks': [
                    '–ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –ø–ª–∞–≥–∏–∞—Ç (<15%)',
                    '–ì—Ä–∞–º–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞',
                    '–°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º –¢–ó',
                    '–§–∏–Ω–∞–ª—å–Ω–∞—è —Ä—É—á–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞'
                ],
                'revision_policy': '–ë–µ—Å–ø–ª–∞—Ç–Ω—ã–µ –ø—Ä–∞–≤–∫–∏ –≤ —Ç–µ—á–µ–Ω–∏–µ 14 –¥–Ω–µ–π –ø–æ—Å–ª–µ —Å–¥–∞—á–∏',
                'satisfaction_guarantee': '100% –≤–æ–∑–≤—Ä–∞—Ç —Å—Ä–µ–¥—Å—Ç–≤ –ø—Ä–∏ –Ω–µ—É–¥–æ–≤–ª–µ—Ç–≤–æ—Ä–∏—Ç–µ–ª—å–Ω–æ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ'
            },
            'transparency_badge': self.transparency_badge,
            'quality_certificate': self.quality_certificate
        }

        # –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ä–∞—Å–∫—Ä—ã—Ç–∏—è
        disclosure_path = self.data_dir / f"disclosure_{job_id}.json"
        with open(disclosure_path, 'w', encoding='utf-8') as f:
            json.dump(disclosure, f, indent=2, ensure_ascii=False)

        return disclosure

    def _generate_transparency_badge(self) -> Dict[str, Any]:
        """–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –±–µ–π–¥–∂–∞ –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç–∏"""
        return {
            'title': '–°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –ü—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç–∏',
            'description': '–≠—Ç–æ—Ç –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å –æ—Ç–∫—Ä—ã—Ç–æ —Ä–∞—Å–∫—Ä—ã–≤–∞–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ò–ò-–ø–æ–º–æ—â–Ω–∏–∫–æ–≤',
            'level': '–ü–ª–∞—Ç–∏–Ω–æ–≤—ã–π',
            'features': [
                '–ü–æ–ª–Ω–æ–µ —Ä–∞—Å–∫—Ä—ã—Ç–∏–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ò–ò',
                '–ß–µ–ª–æ–≤–µ—á–µ—Å–∫–∏–π –∫–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞ –≤—Å–µ—Ö —ç—Ç–∞–ø–∞—Ö',
                '–ì–∞—Ä–∞–Ω—Ç–∏—è –∫–∞—á–µ—Å—Ç–≤–∞ —Ä–∞–±–æ—Ç',
                '–ü—Ä–æ–∑—Ä–∞—á–Ω—ã–µ —É—Å–ª–æ–≤–∏—è —Å–æ—Ç—Ä—É–¥–Ω–∏—á–µ—Å—Ç–≤–∞'
            ],
            'verified': True,
            'issued_at': datetime.now().isoformat()
        }

    def _generate_quality_certificate(self) -> Dict[str, Any]:
        """–ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞ –∫–∞—á–µ—Å—Ç–≤–∞"""
        return {
            'title': '–°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –ö–∞—á–µ—Å—Ç–≤–∞',
            'description': '–ì–∞—Ä–∞–Ω—Ç–∏—è –∫–∞—á–µ—Å—Ç–≤–∞ –≤—Å–µ—Ö –≤—ã–ø–æ–ª–Ω—è–µ–º—ã—Ö —Ä–∞–±–æ—Ç',
            'quality_standards': [
                '–ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –ø–ª–∞–≥–∏–∞—Ç (<15%)',
                '–ì—Ä–∞–º–º–∞—Ç–∏—á–µ—Å–∫–∞—è —á–∏—Å—Ç–æ—Ç–∞ (100%)',
                '–°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –¢–ó (100%)',
                '–°–≤–æ–µ–≤—Ä–µ–º–µ–Ω–Ω–∞—è —Å–¥–∞—á–∞ (95%+)'
            ],
            'guarantees': [
                '–ë–µ—Å–ø–ª–∞—Ç–Ω—ã–µ –ø—Ä–∞–≤–∫–∏',
                '–í–æ–∑–≤—Ä–∞—Ç —Å—Ä–µ–¥—Å—Ç–≤ –ø—Ä–∏ –Ω–µ—É–¥–æ–≤–ª–µ—Ç–≤–æ—Ä–∏—Ç–µ–ª—å–Ω–æ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ',
                '–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ø–æ—Å–ª–µ —Å–¥–∞—á–∏'
            ],
            'verified': True,
            'issued_at': datetime.now().isoformat()
        }

    def generate_client_welcome_package(self, client_id: str) -> Dict[str, Any]:
        """–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –ø–∞–∫–µ—Ç–∞ –¥–ª—è –Ω–æ–≤–æ–≥–æ –∫–ª–∏–µ–Ω—Ç–∞"""

        package = {
            'client_id': client_id,
            'generated_at': datetime.now().isoformat(),
            'welcome_message': """–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –∫–æ–º–∞–Ω–¥—É!

–Ø —Ä–∞–¥ —Å–æ—Ç—Ä—É–¥–Ω–∏—á–µ—Å—Ç–≤—É —Å –≤–∞–º–∏. –í–æ—Ç —á—Ç–æ –≤—ã –º–æ–∂–µ—Ç–µ –æ–∂–∏–¥–∞—Ç—å –æ—Ç –Ω–∞—à–µ–π —Ä–∞–±–æ—Ç—ã:

üìã –ü—Ä–æ—Ü–µ—Å—Å —Ä–∞–±–æ—Ç—ã:
1. –ê–Ω–∞–ª–∏–∑ –≤–∞—à–∏—Ö —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π
2. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —á–µ—Ä–Ω–æ–≤–∏–∫–∞ —Å –ø–æ–º–æ—â—å—é –ò–ò-–ø–æ–º–æ—â–Ω–∏–∫–æ–≤
3. –ú–æ—è —Ñ–∏–Ω–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
4. –°–¥–∞—á–∞ —Ä–∞–±–æ—Ç—ã —Å –≥–∞—Ä–∞–Ω—Ç–∏–µ–π –∫–∞—á–µ—Å—Ç–≤–∞
5. –ë–µ—Å–ø–ª–∞—Ç–Ω—ã–µ –ø—Ä–∞–≤–∫–∏ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏

üéØ –ú–æ–∏ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:
‚Ä¢ –ë—ã—Å—Ç—Ä–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –±–ª–∞–≥–æ–¥–∞—Ä—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ —Ä—É—Ç–∏–Ω—ã
‚Ä¢ –í—ã—Å–æ–∫–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ –±–ª–∞–≥–æ–¥–∞—Ä—è –º–Ω–æ–≥–æ—Å—Ç—É–ø–µ–Ω—á–∞—Ç–æ–π –ø—Ä–æ–≤–µ—Ä–∫–µ
‚Ä¢ –ü—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å ‚Äî —è –æ—Ç–∫—Ä—ã—Ç–æ —Ä–∞—Å—Å–∫–∞–∑—ã–≤–∞—é –æ –ø—Ä–æ—Ü–µ—Å—Å–µ —Ä–∞–±–æ—Ç—ã
‚Ä¢ –ì–∞—Ä–∞–Ω—Ç–∏–∏ ‚Äî –≤–æ–∑–≤—Ä–∞—Ç —Å—Ä–µ–¥—Å—Ç–≤ –ø—Ä–∏ –Ω–µ—É–¥–æ–≤–ª–µ—Ç–≤–æ—Ä–∏—Ç–µ–ª—å–Ω–æ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ

üìû –°–≤—è–∑—å:
–Ø –æ—Ç–≤–µ—á–∞—é –Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ —Ç–µ—á–µ–Ω–∏–µ 1 —á–∞—Å–∞. –°–ª–æ–∂–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é –ª–∏—á–Ω–æ, 
–ø—Ä–æ—Å—Ç—ã–µ ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ (–Ω–æ –≤—Å–µ–≥–¥–∞ –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É—é –∫–∞—á–µ—Å—Ç–≤–æ –æ—Ç–≤–µ—Ç–æ–≤).

–°–ø–∞—Å–∏–±–æ –∑–∞ –¥–æ–≤–µ—Ä–∏–µ!""",
            'transparency_disclosure': self.generate_transparency_disclosure(f"welcome_{client_id}"),
            'service_guarantees': {
                'delivery_time': '–°–æ–±–ª—é–¥–µ–Ω–∏–µ —Å—Ä–æ–∫–æ–≤ 95%+ –∑–∞–∫–∞–∑–æ–≤',
                'quality_standard': '–ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –ø–ª–∞–≥–∏–∞—Ç <15%',
                'revision_policy': '–ë–µ—Å–ø–ª–∞—Ç–Ω—ã–µ –ø—Ä–∞–≤–∫–∏ 14 –¥–Ω–µ–π',
                'refund_policy': '100% –≤–æ–∑–≤—Ä–∞—Ç –ø—Ä–∏ –Ω–µ—É–¥–æ–≤–ª–µ—Ç–≤–æ—Ä–∏—Ç–µ–ª—å–Ω–æ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ'
            },
            'communication_guidelines': {
                'response_time': '–í —Ç–µ—á–µ–Ω–∏–µ 1 —á–∞—Å–∞',
                'complex_questions': '–û–±—Ä–∞–±–∞—Ç—ã–≤–∞—é –ª–∏—á–Ω–æ',
                'simple_questions': '–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –æ—Ç–≤–µ—Ç—ã —Å –º–æ–∏–º –∫–æ–Ω—Ç—Ä–æ–ª–µ–º',
                'revision_requests': '–û–±—Ä–∞–±–∞—Ç—ã–≤–∞—é –≤ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ'
            }
        }

        # –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø–∞–∫–µ—Ç–∞
        package_path = self.data_dir / f"welcome_package_{client_id}.json"
        with open(package_path, 'w', encoding='utf-8') as f:
            json.dump(package, f, indent=2, ensure_ascii=False)

        return package

    def update_transparency_metrics(self, job_id: str, metrics: Dict[str, Any]):
        """–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –º–µ—Ç—Ä–∏–∫ –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç–∏ –¥–ª—è –∑–∞–∫–∞–∑–∞"""

        metrics_path = self.data_dir / f"metrics_{job_id}.json"

        if metrics_path.exists():
            with open(metrics_path, 'r', encoding='utf-8') as f:
                existing_metrics = json.load(f)
            existing_metrics.update(metrics)
        else:
            existing_metrics = metrics

        with open(metrics_path, 'w', encoding='utf-8') as f:
            json.dump(existing_metrics, f, indent=2, ensure_ascii=False)

        self.audit_logger.log_security_event(
            event_type='transparency_metrics_updated',
            description=f'–û–±–Ω–æ–≤–ª–µ–Ω—ã –º–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç–∏ –¥–ª—è –∑–∞–∫–∞–∑–∞ {job_id}',
            metadata={'job_id': job_id, 'metrics': metrics}
        )

    def generate_public_profile(self) -> Dict[str, Any]:
        """–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø—É–±–ª–∏—á–Ω–æ–≥–æ –ø—Ä–æ—Ñ–∏–ª—è —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç–∏"""

        profile = {
            'title': '–ü—Ä–æ—Ñ–∏–ª—å –ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è',
            'transparency_level': '–ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π',
            'ai_usage_disclosed': True,
            'human_oversight': '100%',
            'quality_guarantees': [
                '–ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –ø–ª–∞–≥–∏–∞—Ç',
                '–ì—Ä–∞–º–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞',
                '–§–∏–Ω–∞–ª—å–Ω–∞—è —Ä—É—á–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞',
                '–ì–∞—Ä–∞–Ω—Ç–∏—è –≤–æ–∑–≤—Ä–∞—Ç–∞ —Å—Ä–µ–¥—Å—Ç–≤'
            ],
            'work_process': [
                '–ê–Ω–∞–ª–∏–∑ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π (–ò–ò + —á–µ–ª–æ–≤–µ–∫)',
                '–ì–µ–Ω–µ—Ä–∞—Ü–∏—è —á–µ—Ä–Ω–æ–≤–∏–∫–∞ (–ò–ò)',
                '–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –ø—Ä–æ–≤–µ—Ä–∫–∞ (—á–µ–ª–æ–≤–µ–∫)',
                '–§–∏–Ω–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞ (–∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è + —á–µ–ª–æ–≤–µ–∫)',
                '–°–¥–∞—á–∞ —Ä–∞–±–æ—Ç—ã –∫–ª–∏–µ–Ω—Ç—É'
            ],
            'client_testimonials_count': self._get_testimonials_count(),
            'success_rate': '95%',
            'on_time_delivery': '98%',
            'satisfaction_rate': '4.9/5.0'
        }

        return profile

    def _get_testimonials_count(self) -> int:
        """–ü–æ–ª—É—á–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –æ—Ç–∑—ã–≤–æ–≤ –∫–ª–∏–µ–Ω—Ç–æ–≤"""
        # –ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
        return 47  # –ü—Ä–∏–º–µ—Ä


# –ì–ª–æ–±–∞–ª—å–Ω—ã–π —ç–∫–∑–µ–º–ø–ª—è—Ä —Å–∏—Å—Ç–µ–º—ã –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç–∏
_transparency_system_instance = None


def get_transparency_system(data_dir: str = "data/transparency") -> ClientTransparencySystem:
    """–ü–æ–ª—É—á–µ–Ω–∏–µ –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ —Å–∏—Å—Ç–µ–º—ã –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç–∏"""
    global _transparency_system_instance

    if _transparency_system_instance is None:
        _transparency_system_instance = ClientTransparencySystem(data_dir)

    return _transparency_system_instance